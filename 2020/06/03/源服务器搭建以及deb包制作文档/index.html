<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>源服务器搭建以及deb包制作文档 | 海龟先生</title><meta name="description" content="linux哇"><meta name="keywords" content="K8S"><meta name="author" content="海龟先生"><meta name="copyright" content="海龟先生"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://haiguixiansheng.org.cn/2020/06/03/源服务器搭建以及deb包制作文档/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="源服务器搭建以及deb包制作文档"><meta name="twitter:description" content="linux哇"><meta name="twitter:image" content="http://haiguixiansheng.org.cn/img/linux.png"><meta property="og:type" content="article"><meta property="og:title" content="源服务器搭建以及deb包制作文档"><meta property="og:url" content="http://haiguixiansheng.org.cn/2020/06/03/源服务器搭建以及deb包制作文档/"><meta property="og:site_name" content="海龟先生"><meta property="og:description" content="linux哇"><meta property="og:image" content="http://haiguixiansheng.org.cn/img/linux.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="django使用锁" href="http://haiguixiansheng.org.cn/2020/10/12/django使用锁/"><link rel="next" title="11. K8S之Ingress" href="http://haiguixiansheng.org.cn/2020/05/22/11. K8S之Ingress/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天'

  
}</script></head><body><canvas class="fireworks"></canvas><div id="web_bg"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#源服务器搭建以及deb包制作文档"><span class="toc-number">1.</span> <span class="toc-text">源服务器搭建以及deb包制作文档</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#源服务器的搭建"><span class="toc-number">1.1.</span> <span class="toc-text">源服务器的搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-安装nginx"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. 安装nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-创建源服务器的目录环境"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 创建源服务器的目录环境</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二进制文件的普通包转为deb包"><span class="toc-number">1.2.</span> <span class="toc-text">二进制文件的普通包转为deb包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#环境说明1"><span class="toc-number">1.2.1.</span> <span class="toc-text">环境说明1</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#环境说明2"><span class="toc-number">1.3.</span> <span class="toc-text">环境说明2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#准备环境，需要安装dpkg"><span class="toc-number">1.3.1.</span> <span class="toc-text">准备环境，需要安装dpkg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#准备deb的目录结构"><span class="toc-number">1.3.2.</span> <span class="toc-text">准备deb的目录结构</span></a></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/linux.png)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">海龟先生</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><div class="menu_mask"></div><span class="pull-right menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item text-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">51</div></a></div></div><div class="mobile_data_item text-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">6</div></a></div></div><div class="mobile_data_item text-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">4</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title"><div class="posttitle">源服务器搭建以及deb包制作文档</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-06-03<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2021-03-16</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Linux/">Linux</a></span><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">2k</span><span class="post-meta__separator">|</span><span>阅读时长: 7 分钟</span><span class="post-meta__separator">|</span><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="源服务器搭建以及deb包制作文档"><a href="#源服务器搭建以及deb包制作文档" class="headerlink" title="源服务器搭建以及deb包制作文档"></a>源服务器搭建以及deb包制作文档</h1><h2 id="源服务器的搭建"><a href="#源服务器的搭建" class="headerlink" title="源服务器的搭建"></a>源服务器的搭建</h2><h3 id="1-安装nginx"><a href="#1-安装nginx" class="headerlink" title="1. 安装nginx"></a>1. 安装nginx</h3><ul>
<li><ol>
<li>cmd： <code>yum -y install nginx</code></li>
</ol>
</li>
<li><ol start="2">
<li>编辑配置文件： <code>vim /etc/nginx/nginx.conf</code>，增加以下内容：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       81 default_server;</span><br><span class="line">    listen       [::]:81 default_server;</span><br><span class="line">    server_name  _;</span><br><span class="line">    root         /usr/cus/package/;</span><br><span class="line">  </span><br><span class="line">    # Load configuration files for the default server block.</span><br><span class="line">    include /etc/nginx/default.d/*.conf;</span><br><span class="line">  </span><br><span class="line">    location / &#123;</span><br><span class="line">      autoindex on; ##显示索引</span><br><span class="line">      autoindex_exact_size on; ##显示大小</span><br><span class="line">      autoindex_localtime on;   ##显示时间</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    error_page 404 /404.html;</span><br><span class="line">        location = /40x.html &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<p>其中，<code>listen 81</code>是nginx的监听端口，<code>root</code>是包的根路径。<code>location /</code>是开启目录访问。</p>
<ul>
<li><ol start="3">
<li>配置nginx的systemctl服务管理：</li>
</ol>
<p><code>vim /usr/lib/systemd/system/nginx.service</code>，写入以下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=The nginx HTTP and reverse proxy server</span><br><span class="line">After=network.target remote-fs.target nss-lookup.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">PIDFile=/run/nginx.pid</span><br><span class="line"><span class="meta">#</span><span class="bash"> Nginx will fail to start <span class="keyword">if</span> /run/nginx.pid already exists but has the wrong</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> SELinux context. This might happen when running `nginx -t` from the cmdline.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> https://bugzilla.redhat.com/show_bug.cgi?id=1268621</span></span><br><span class="line">ExecStartPre=/usr/bin/rm -f /run/nginx.pid</span><br><span class="line">ExecStartPre=/usr/sbin/nginx -t</span><br><span class="line">ExecStart=/usr/sbin/nginx</span><br><span class="line">ExecReload=/bin/kill -s HUP $MAINPID</span><br><span class="line">KillSignal=SIGQUIT</span><br><span class="line">TimeoutStopSec=5</span><br><span class="line">KillMode=process</span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-创建源服务器的目录环境"><a href="#2-创建源服务器的目录环境" class="headerlink" title="2. 创建源服务器的目录环境"></a>2. 创建源服务器的目录环境</h3><ul>
<li><ol>
<li>创建文件夹，<code>mkidr -p /usr/cus/package/debian/jessie/dvd1</code>（这里其实是模仿的iso镜像盘的路径），在此路径下，继续创建文件夹：<code>mkdir -p pool/main/</code> 以及 <code>mkdir -p  pool/contrib/</code>，以上两个路径是用于存放deb包的路径</li>
</ol>
</li>
<li><ol start="2">
<li>创建包信息文件路径，提供给客户端使用，路径是有固定写法的。在<code>/usr/cus/package/debian/jessie/dvd1</code>下面，创建文件夹：<code>mkdir -p dists/jessie/main/binary-mips/</code> 以及 <code>mkdir -p dists/jessie/contrib/binary-mips/</code>，这两个路径分别用来，存放<code>/usr/cus/package/debian/jessie/dvd1/pool/main/</code>和<code>/usr/cus/package/debian/jessie/dvd1/pool/contrib/</code>的deb包的package的信息。</li>
</ol>
</li>
<li><ol start="3">
<li><p>生成包信息： </p>
<p>分别在<code>/usr/cus/package/debian/jessie/dvd1/</code>  下面，</p>
<p>执行命令：<code>dpkg-scanpackages -m . | gzip -c &gt;  Packages.gz</code>，那么这个压缩包内就会包含<code>main</code> 和<code>contrib</code>所有的包信息。把这个包放到上一步骤中的两个文件夹中去。命令： <code>cp Packages.gz dists/jessie/main/binary-mips/</code>和<code>cp Packages.gz dists/jessie/contrib/binary-mips/</code>。然后两个文件夹下进行解压<code>gzip -c -d Packages.gz &gt; Packages</code></p>
</li>
</ol>
<p><strong><em>到此为止，源服务器就搭建好了，需要注意的是，每次往包文件夹里面更新包的时候，需要重复3步骤</em></strong></p>
</li>
</ul>
<h2 id="二进制文件的普通包转为deb包"><a href="#二进制文件的普通包转为deb包" class="headerlink" title="二进制文件的普通包转为deb包"></a>二进制文件的普通包转为deb包</h2><h3 id="环境说明1"><a href="#环境说明1" class="headerlink" title="环境说明1"></a>环境说明1</h3><ul>
<li>机器ip地址： 172.16.30.40</li>
<li>端口： 5188</li>
<li>用户名： cbccom</li>
<li>密码：Cbccom@2018#!</li>
</ul>
<h2 id="环境说明2"><a href="#环境说明2" class="headerlink" title="环境说明2"></a>环境说明2</h2><ul>
<li>机器上必须要有<code>dpkg</code> 环境，已经安装好了。</li>
</ul>
<h3 id="准备环境，需要安装dpkg"><a href="#准备环境，需要安装dpkg" class="headerlink" title="准备环境，需要安装dpkg"></a>准备环境，需要安装dpkg</h3><ul>
<li>cmd： <code>yum -y install dpkg</code></li>
</ul>
<h3 id="准备deb的目录结构"><a href="#准备deb的目录结构" class="headerlink" title="准备deb的目录结构"></a>准备deb的目录结构</h3><ul>
<li><p>可执行文件说明：</p>
<p>以下四个文件都是可选的，都需要可执行权限。</p>
<p>这些是软件包安装前后自动运行的可执行脚本. 统称为控制文件, 是 Deian 软件包的”控制”部分它们是：</p>
<p><strong><em>preinst</em></strong></p>
<p>Debian软件包(“.deb”)解压前执行的脚本, 为正在被升级的包停止相关服务,直到升级或安装完成。 (成功后执行 ‘postinst’ 脚本)。</p>
<p><strong><em>postinst</em></strong></p>
<p>主要完成软件包(“.deb”)安装完成后所需的配置工作. 通常, postinst 脚本要求用户输入, 和/或警告用户如果接受默认值, 应该记得按要求返回重新配置这个软件。 一个软件包安装或升级完成后，postinst 脚本驱动命令, 启动或重起相应的服务。</p>
<p><strong><em>prerm</em></strong></p>
<p>停止一个软件包的相关进程, 要卸载软件包的相关文件前执行。</p>
<p><strong><em>postrm</em></strong></p>
<p>修改相关文件或连接, 和/或卸载软件包所创建的文件。<br>当前的所有配置文件都可在 /var/lib/dpkg/info 目录下找到, 与 foo 软件包相关的命名以 “foo” 开头,以 “preinst”, “postinst”, 等为扩展。这个目录下的 foo.list 文件列出了软件包安装的所有文件。Debian里用apt-get安装或卸载软件时，会常发生前处理或后处理的错误，这时只要删除 对应的脚本文件，重新执行安装或卸载即可</p>
</li>
<li><p>以下三个文件也是可选的</p>
</li>
<li><p><strong><em>copyright</em></strong></p>
<p>顾名思义，这个文件包含了上游软件的版权以及许可证信息。</p>
</li>
<li><p><strong><em>changeLog</em></strong></p>
<p>版本变更信息，对于一个需要长期维护的软件，版本变更信息的跟踪是非常有必要的。</p>
</li>
<li><p><strong><em>rules</em></strong></p>
<p> 每一个rules文件，就像其他的Makefile一样，包含若干的规则，每一列规则都定义了一些对于deb包的操作，主要作用是控制源码包的编译安装等行为。</p>
</li>
<li><p>deb包的目录结构分为两部分，结构大概如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">apt-falcon-agent-mips64    # 包的根路径</span><br><span class="line">├─tmp           # 这是我们想让包安装的位置，默认是从根分区开始写的也就是（/tmp）</span><br><span class="line">|  ├─test</span><br><span class="line">|  |     └falcon-agent</span><br><span class="line">├─DEBIAN     # 固定写法</span><br><span class="line">|   └control    # 包信息的控制文件</span><br><span class="line">	└postinst    # 完成后所需的配置工作，（注：执行路径是根路径）</span><br><span class="line">	└...</span><br><span class="line"><span class="meta">#</span><span class="bash"> 对于这个demo，当我们执行dpkg -i &lt;包名&gt; 之后，那么falcon-agent就会安装在/tmp/<span class="built_in">test</span>/目录下了</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>control文件的写法及要求：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Package：指该软件包的名字。如果你的软件包名称有两个词，用一个连字符（-）把它们连起来。软件包的名称只能有小写的英文字母，数字以及"+"和"-"。</span><br><span class="line"></span><br><span class="line">Version：版本。确保这里的值不包括连字符。</span><br><span class="line"></span><br><span class="line">Section：列出了你的软件属于的类别，可能的值包括admin（管理），games（游戏），gnome，kde，mail（电子邮件），misc（杂项）&lt;译者注：misc是miscellaneous的简称&gt;，net（网络），sound（声音），text（文本），utils（实用工具）和web（万维网）。</span><br><span class="line"></span><br><span class="line">Priority：声明这个包的优先级（大部分的时候使用optional（可选的））。</span><br><span class="line"></span><br><span class="line">Architecture：是该程序可运行的CPU架构（可能的值为i386，amd64和powerpc）&lt;译者注：此处虽然是专有名词，但是由于linux是大小写敏感的，所以文件内还是应该小写&gt;。</span><br><span class="line"></span><br><span class="line">Eseential：指该软件包是否是必须的（大部分的时候不是）。</span><br><span class="line"></span><br><span class="line">Depends：意味着要使用这个程序必须拥有的程序，</span><br><span class="line"></span><br><span class="line">Recommends：指除了极特殊情况下的安装之外，大多数时候都需要的依赖关系。</span><br><span class="line"></span><br><span class="line">Suggests：意味可能给这个软件带来更多功能的，但是没有完全没有问题的依赖关系&lt;译者注：同Recommands&gt;。</span><br><span class="line"></span><br><span class="line">      你可以用英文的半角逗号分开不同的依赖关系(,)。如果两个软件中的任何一个可以工作，用竖线"|"分开它们。你也可以指定特定的版本，用在括号里用&lt;&lt;（小于），&lt;=（小于或等于），=（等于），&gt;=（大于或等于），或&gt;&gt;（大于）来表示。</span><br><span class="line">Install-Size是程序安装后的大小，按KB算。</span><br><span class="line"></span><br><span class="line">Maintainer：就是你（写上你的名字，后面的方括号"[ ]"里留下你的电子邮件地址）。</span><br><span class="line"></span><br><span class="line">Conflicts：表示跟这个程序冲突的软件。</span><br><span class="line"></span><br><span class="line">Replaces：表明哪些软件包将被这个程序取代。</span><br><span class="line"></span><br><span class="line">Description：显示你的描述。</span><br></pre></td></tr></table></figure>



</li>
</ul>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> demo1</span></span><br><span class="line">ackage: vim-common</span><br><span class="line">Source: vim</span><br><span class="line">Version: 2:8.0.1453-1ubuntu1.1</span><br><span class="line">Architecture: all</span><br><span class="line">Maintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;</span><br><span class="line">Installed-Size: 329</span><br><span class="line">Depends: xxd</span><br><span class="line">Recommends: vim | vim-gtk | vim-gtk3 | vim-athena | vim-nox | vim-tiny</span><br><span class="line">Section: editors</span><br><span class="line">Priority: important</span><br><span class="line">Homepage: https://vim.sourceforge.io/</span><br><span class="line">Description: Vi IMproved - Common files</span><br><span class="line"> Vim is an almost compatible version of the UNIX editor Vi.</span><br><span class="line"> .</span><br><span class="line"> This package contains files shared by all non GUI-enabled vim variants</span><br><span class="line"> available in Debian.  Examples of such shared files are: manpages and</span><br><span class="line"> configuration files.</span><br><span class="line">Original-Maintainer: Debian Vim Maintainers &lt;pkg-vim-maintainers@lists.alioth.debian.org&gt;</span><br></pre></td></tr></table></figure>



  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> demo2</span></span><br><span class="line">Package: vpn-guard</span><br><span class="line">Version: 1.04.121</span><br><span class="line">Section: utils</span><br><span class="line">Priority: optional</span><br><span class="line">Architecture: amd64</span><br><span class="line">Depends:</span><br><span class="line">Installed-Size: 512</span><br><span class="line">Maintainer: m18355090629@163.com</span><br><span class="line">Description: This is a vpn-guard package</span><br></pre></td></tr></table></figure>

<ul>
<li><p>打包：</p>
<p>到包根目录的上一层，然后执行：</p>
<p><code>dpkg -b 包目录/ /目的路径/包名.deb</code></p>
</li>
<li><p>命名格式暂时定为：</p>
<p>包名-大版本.月份.git版本-芯片架构.deb</p>
<p>如：vpn-guard-1.04.121-amd64.deb</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  软件名称：vpn-guard</span><br><span class="line">  版本号：1.04.121 （大版本.月份.git版本）</span><br><span class="line">  芯片架构：amd64</span><br><span class="line">软件包类型：deb</span><br></pre></td></tr></table></figure>


</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">海龟先生</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://haiguixiansheng.org.cn/2020/06/03/源服务器搭建以及deb包制作文档/">http://haiguixiansheng.org.cn/2020/06/03/源服务器搭建以及deb包制作文档/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://haiguixiansheng.org.cn">海龟先生</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/K8S/">K8S    </a></div><div class="post_share"><div class="social-share" data-image="/img/linux.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-buttom"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2020/10/12/django使用锁/"><img class="prev_cover lozad" data-src="/img/django.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>django使用锁</span></div></a></div><div class="next-post pull-right"><a href="/2020/05/22/11. K8S之Ingress/"><img class="next_cover lozad" data-src="/img/k8s.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>11. K8S之Ingress</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/05/22/11. K8S之Ingress/" title="11. K8S之Ingress"><img class="relatedPosts_cover lozad" data-src="/img/k8s.jpg"><div class="relatedPosts_title">11. K8S之Ingress</div></a></div><div class="relatedPosts_item"><a href="/2020/05/20/10. K8S之svc/" title="10. K8S之svc"><img class="relatedPosts_cover lozad" data-src="/img/k8s.jpg"><div class="relatedPosts_title">10. K8S之svc</div></a></div><div class="relatedPosts_item"><a href="/2020/05/20/9. K8S之deployment/" title="9. K8S之deployment"><img class="relatedPosts_cover lozad" data-src="/img/k8s.jpg"><div class="relatedPosts_title">9. K8S之deployment</div></a></div><div class="relatedPosts_item"><a href="/2020/04/15/8. K8S之常用命令/" title="8. K8S 之常用命令"><img class="relatedPosts_cover lozad" data-src="/img/k8s.jpg"><div class="relatedPosts_title">8. K8S 之常用命令</div></a></div><div class="relatedPosts_item"><a href="/2020/04/13/7. K8S之安装/" title="7. K8S之安装"><img class="relatedPosts_cover lozad" data-src="/img/k8s.jpg"><div class="relatedPosts_title">7. K8S之安装</div></a></div><div class="relatedPosts_item"><a href="/2020/04/11/6. K8S之资源对象/" title="6. K8S之资源对象"><img class="relatedPosts_cover lozad" data-src="/img/k8s.jpg"><div class="relatedPosts_title">6. K8S之资源对象</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="lv-container" data-id="city" data-uid="MTAyMC80NjY1Ny8yMzE2Nw=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div></div><footer><div id="footer"><div class="copyright">&copy;2018 - 2021 By 海龟先生</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://www.cnblogs.com/haiguixiansheng/">blog</a>!</div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><a id="to_comment" href="#post-comment"><i class="scroll_to_comment fa fa-comments"></i></a><i class="fa fa-book" id="readmode" title="阅读模式"> </i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">繁</a><i class="nightshift fa fa-moon-o" id="nightshift" title="夜间模式"></i></section><div class=" " id="post_bottom"><div id="post_bottom_items"><a id="mobile_to_comment" href="#post-comment"><i class="mobile_scroll_to_comment fa fa-comments"></i></a><i class="fa fa-list" id="mobile_toc"></i><div id="toc_mobile"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#源服务器搭建以及deb包制作文档"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">源服务器搭建以及deb包制作文档</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#源服务器的搭建"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">源服务器的搭建</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-安装nginx"><span class="toc_mobile_items-number">1.1.1.</span> <span class="toc_mobile_items-text">1. 安装nginx</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-创建源服务器的目录环境"><span class="toc_mobile_items-number">1.1.2.</span> <span class="toc_mobile_items-text">2. 创建源服务器的目录环境</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#二进制文件的普通包转为deb包"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">二进制文件的普通包转为deb包</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#环境说明1"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">环境说明1</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#环境说明2"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">环境说明2</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#准备环境，需要安装dpkg"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">准备环境，需要安装dpkg</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#准备deb的目录结构"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">准备deb的目录结构</span></a></li></ol></li></ol></li></ol></div></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="/js/nightshift.js"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/js/piao.js"></script><script color="0,0,255" opacity="0.7" zindex="-1" count="99" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/js/canvas-nest.js"></script><script src="/js/activate-power-mode.js"></script><script>POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = true; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();</script></body></html>